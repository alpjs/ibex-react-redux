{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;kBAQwB,cAAc;;;;;;;;;;;;;;;;;;AAFtC,MAAM,MAAM,GAAG,iBALN,aAAa,CAKW,YAAY,CAAC,CAAC;;AAEhC,SAAS,cAAc,OAA2C;QAAxC,IAAI,QAAJ,IAAI;QAAE,QAAQ,QAAR,QAAQ;QAAE,WAAW,QAAX,WAAW;QAAE,OAAO,QAAP,OAAO;;AACzE,WAAO,AAAC,GAAG,IAAK;AACZ,WAAG,CAAC,OAAO,CAAC,MAAM,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE;AACvC,kBAAM,CAAC,KAAK,CAAC,aAAa,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;;AAE3D,gBAAI,CAAC,IAAI,EAAE;AACP,sBAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;aACxD;;AAED,kBAAM,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;SAC3B,CAAC;;AAEF,cAAM,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC;AAAC,AAC3C,cAAM,KAAK,GAAG,WAjBb,WAAW,EAiBc,QAAQ,EAAE,WAAW,CAAC,CAAC;AACjD,eAAO,CAAC,KAAK,GAAG,KAAK,CAAC;;AAEtB,YAAI,QAAQ,CAAC,UAAU,KAAK,UAAU,EAAE;AACpC,kBAAM,CAAC,KAAK,CAAC,kDAAkD,CAAC,CAAC;AACjE,gCAAO;AACH,uBAAO;AACP,yBAAS,EAAE,IAAI;AACf,oBAAI,EAAE,WAAW;AACjB,uBAAO;AACP,mBAAG,qBAAA;aACN,CAAC,CAAC;SACN,MAAM;AACH,kBAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;AACvC,qBAAS,CAAC,EAAE,CAAC,kBAAkB,EAAE,MAAM;AACnC,sBAAM,CAAC,KAAK,CAAC,0CAA0C,CAAC,CAAC;AACzD,oCAAO;AACH,2BAAO;AACP,6BAAS,EAAE,IAAI;AACf,wBAAI,EAAE,WAAW;AACjB,2BAAO;AACP,uBAAG,qBAAA;iBACN,CAAC,CAAC;aACN,CAAC,CAAC;SACN;;AAED,eAAO,OAAO,CAAC;KAClB,CAAC;CACL","file":"index.js","sourcesContent":["/* global $document */\nimport { ConsoleLogger } from 'nightingale';\nimport render from 'fody';\nimport App from 'fody-redux';\nimport { createStore } from 'redux';\n\nconst logger = new ConsoleLogger('ibex.react');\n\nexport default function ibexReactRedux({ View, reducers, initialData, element }) {\n    return (app) => {\n        app.context.render = function (View, data) {\n            logger.debug('render view', { viewName: View.name, data });\n\n            if (!View) {\n                throw new Error('View is undefined, class expected');\n            }\n\n            throw new Error('TODO');\n        };\n\n        const context = Object.create(app.context); // initial context.\n        const store = createStore(reducers, initialData);\n        context.store = store;\n\n        if (document.readyState === 'complete') {\n            logger.debug('load react components, document is already ready');\n            render({\n                context,\n                Component: View,\n                data: initialData,\n                element,\n                App,\n            });\n        } else {\n            logger.debug('waiting document ready');\n            $document.on('DOMContentLoaded', () => {\n                logger.debug('load react components, document is ready');\n                render({\n                    context,\n                    Component: View,\n                    data: initialData,\n                    element,\n                    App,\n                });\n            });\n        }\n\n        return context;\n    };\n}\n"]}